---
import {
  Briefcase,
  TrendingUp,
  Zap,
  Award,
  type LucideProps,
  Plane,
} from "lucide-react";
import type { ForwardRefExoticComponent, JSX, RefAttributes } from "react";

interface ExperienceItem {
  id: string;
  title: string;
  company: string;
  duration: string;
  achievements: string[];
  tools: string[];
  icon: string;
  timeLineIcon: ForwardRefExoticComponent<
    Omit<LucideProps, "ref"> & RefAttributes<SVGSVGElement>
  >;
}

const experiences: ExperienceItem[] = [
  {
    id: "1",
    title: "Relocate to Ireland",
    company: "",
    duration: "Feb 2022 ‚Äì Present",
    achievements: [
      "Earned a Master‚Äôs Degree in Data Analytics, specializing in advanced statistical modeling and data-driven decision-making.",
      "Gained hands-on experience through diverse part-time roles, developing strong problem-solving, teamwork, and time-management skills.",
    ],
    tools: [],
    icon: "‚úàÔ∏è",
    timeLineIcon: Plane,
  },
  {
    id: "1",
    title: "Full Stack Developer",
    company: "Code √âxitos",
    duration: "Mar 2021 ‚Äì Jan 2022",
    achievements: [
      "Engineered **Jobbox**, a rental platform built with Django REST API and React Native, deployed on AWS, scaling to 1,000+ users with improved customer engagement through return and review workflows.",
      "Enhanced **Quotient App**, a blockchain-based social network using React Native and a NestJS (Node.js) backend with microservices, implementing secure file uploads and cloud storage integration to boost content sharing.",
      "Improved **Clink**, a real-time survey visualization platform, by adding chart configuration uploads, responsive layouts with Tailwind CSS, and CI pipelines using Jest and Cypress ‚Äî reducing post-deployment bugs by 15%.",
    ],
    tools: [
      "React Native",
      "NestJS",
      "Python",
      "Django",
      "AWS",
      "Tailwind CSS",
      "Jest",
      "Cypress",
      "PostgreSQL",
    ],
    icon: "üöÄ",
    timeLineIcon: Briefcase,
  },
  {
    id: "2",
    title: "Full Stack Developer / Scrum Master",
    company: "Farsiman Group",
    duration: "Nov 2011 ‚Äì Oct 2020",
    achievements: [
      "Led a team of 7 developers in Agile delivery using Jira and Git, improving team efficiency by 20% through optimized CI/CD pipelines.",
      "Integrated bank payment processing into a custom POS system, reducing transaction times by nearly 1 minute and improving backend API accuracy.",
      "Implemented secure authentication and GDPR-aligned data protection measures for applications handling sensitive customer data.",
      "Built a **Logistics Monitor** system tracking 100+ parcels daily with role-based access control, reducing misrouting by 25% and improving operational visibility.",
    ],
    tools: ["Angular", "C#", "MySQL", "Jira", "Git", "CI/CD"],
    icon: "üíº",
    timeLineIcon: Briefcase,
  },
  {
    id: "3",
    title: "Developer",
    company: "ITNova",
    duration: "Jan 2009 ‚Äì Nov 2011",
    achievements: [
      "Developed an **Inventory Management System** for a local pharmacy, improving stock accuracy by 95% and reducing reconciliation time by 2 hours per week.",
      "Created an **HR System** for a retail business to manage staff records, onboarding, and turnover metrics ‚Äî improving HR data access time by 60%.",
      "Designed dashboards and reports that enhanced decision-making on staffing and inventory management.",
    ],
    tools: ["C#", "MySQL", "Bootstrap", "JavaScript"],
    icon: "üß©",
    timeLineIcon: Briefcase,
  },
];

const skills = [
  {
    category: "Frontend",
    items: [
      "React",
      "React Native",
      "Next.js",
      "TypeScript",
      "Tailwind CSS",
      "Redux",
    ],
  },
  {
    category: "Backend",
    items: [
      "Node.js",
      "Express.js",
      "Django",
      "Python",
      "GraphQL",
      "RESTful APIs",
    ],
  },
  {
    category: "Database",
    items: ["PostgreSQL", "MongoDB", "MySQL", "DynamoDB", "Firebase"],
  },
  {
    category: "Cloud & DevOps",
    items: ["AWS", "Google Cloud", "Docker", "CI/CD", "Git", "Microservices"],
  },
  {
    category: "Other",
    items: [
      "AI/LLMs",
      "Jest",
      "Cypress",
      "WCAG/ARIA",
      "Secure Coding",
      "Agile",
    ],
  },
];
---

<section
  id="experience"
  class="py-20 px-4 sm:px-6 lg:px-8 bg-slate-50/50 dark:bg-slate-900/50"
>
  <div class="max-w-7xl mx-auto">
    {/* Section Header */}
    <div class="text-center mb-16">
      <h2 class="text-slate-900 dark:text-white mb-4">Experience & Skills</h2>
      <p class="text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
        My professional journey and technical expertise
      </p>
    </div>

    {/* Timeline */}
    <div class="relative">
      {/* Timeline line */}
      <div
        class="hidden md:block absolute left-1/2 transform -translate-x-1/2 w-1 h-full bg-gradient-to-b from-blue-500 via-indigo-500 to-purple-500 rounded-full"
      >
      </div>

      <div class="space-y-12">
        {
          experiences.map((exp, index) => (
            <div
              class={`relative flex flex-col md:flex-row gap-8 items-center ${
                index % 2 === 0 ? "md:flex-row" : "md:flex-row-reverse"
              }`}
            >
              {/* Content Card */}
              <div class="w-full md:w-5/12">
                <div class="group bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border-2 border-transparent hover:border-blue-500/20">
                  {/* Header */}
                  <div class="flex items-start justify-between mb-4">
                    <div class="flex-1">
                      <div class="flex items-center space-x-2 mb-2">
                        <span class="text-2xl">{exp.icon}</span>
                        <h3 class="text-slate-900 dark:text-white">
                          {exp.title}
                        </h3>
                      </div>
                      <p class="text-blue-600 dark:text-blue-400">
                        {exp.company}
                      </p>
                      <p class="text-slate-500 dark:text-slate-400 text-sm mt-1">
                        {exp.duration}
                      </p>
                    </div>
                  </div>

                  {/* Achievements */}
                  <div class="space-y-3 mb-4">
                    {exp.achievements.map((achievement, i) => (
                      <div class="flex items-start space-x-2">
                        <Award className="w-4 h-4 text-blue-500 mt-1 flex-shrink-0" />
                        <p class="text-slate-600 dark:text-slate-300 text-sm">
                          {achievement}
                        </p>
                      </div>
                    ))}
                  </div>

                  {/* Tools */}
                  <div class="flex flex-wrap gap-2">
                    {exp.tools.map((tool, i) => (
                      <span class="px-3 py-1 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 text-blue-600 dark:text-blue-400 rounded-full text-xs border border-blue-200/50 dark:border-blue-500/20">
                        {tool}
                      </span>
                    ))}
                  </div>
                </div>
              </div>

              {/* Timeline dot */}
              <div class="hidden md:flex absolute left-1/2 transform -translate-x-1/2 w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full items-center justify-center shadow-lg border-4 border-white dark:border-slate-900">
                <exp.timeLineIcon className="w-6 h-6 text-white" />
              </div>

              {/* Spacer for alternating layout */}
              <div class="hidden md:block w-5/12" />
            </div>
          ))
        }
      </div>
    </div>

    {/* Skills Grid */}
    <div class="mt-20">
      <h3 class="text-center text-slate-900 dark:text-white mb-8">
        Technical Skills
      </h3>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {
          skills.map((skillGroup, index) => (
            <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 dark:border-slate-700">
              <div class="flex items-center space-x-2 mb-4">
                <Zap className="w-5 h-5 text-blue-500" />
                <h4 class="text-slate-900 dark:text-white">
                  {skillGroup.category}
                </h4>
              </div>
              <div class="flex flex-wrap gap-2">
                {skillGroup.items.map((skill, i) => (
                  <span class="px-3 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg text-sm hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:text-blue-600 dark:hover:text-blue-400 transition-colors cursor-default">
                    {skill}
                  </span>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
